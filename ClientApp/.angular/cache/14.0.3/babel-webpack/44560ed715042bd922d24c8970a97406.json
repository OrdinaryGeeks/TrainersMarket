{"ast":null,"code":"import { Injector } from '@angular/core';\nimport { AuthorizeService } from '../../api-authorization/authorize.service';\nimport { Observable } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport { ModalDismissReasons, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ShoppingcartService } from '../shoppingcart.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../api-authorization/authorize.service\";\nimport * as i2 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i3 from \"../shoppingcart.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"ngx-pagination\";\n\nfunction ProductComponent_h4_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"h4\")(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductComponent_h4_2_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.shopperScene());\n    });\n    i0.ɵɵtext(2, \"Shopper View\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductComponent_h4_2_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.adminScene());\n    });\n    i0.ɵɵtext(4, \"Admin View\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ProductComponent_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 8);\n  }\n}\n\nfunction ProductComponent_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 9);\n    i0.ɵɵlistener(\"ngSubmit\", function ProductComponent_form_4_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.onAddItem());\n    });\n    i0.ɵɵelementStart(1, \"div\", 10)(2, \"h3\", 11);\n    i0.ɵɵtext(3, \"Enter details for new item\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 12)(5, \"label\", 13);\n    i0.ɵɵtext(6, \"Enter Name of Item\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductComponent_form_4_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.itemName = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 12)(9, \"label\", 15);\n    i0.ɵɵtext(10, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductComponent_form_4_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.description = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 12)(13, \"label\", 17);\n    i0.ɵɵtext(14, \"Cost\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"input\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductComponent_form_4_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.cost = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 12)(17, \"label\", 19);\n    i0.ɵɵtext(18, \"Image Link\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"input\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductComponent_form_4_Template_input_ngModelChange_19_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.imageUrl = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 12)(21, \"label\", 21);\n    i0.ɵɵtext(22, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"input\", 22);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductComponent_form_4_Template_input_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.quantity = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"button\", 23);\n    i0.ɵɵtext(25, \"Add Item\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.itemName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.cost);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.imageUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.quantity);\n  }\n}\n\nfunction ProductComponent_div_5_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 27)(1, \"img\", 28);\n    i0.ɵɵlistener(\"click\", function ProductComponent_div_5_li_2_Template_img_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const item_r19 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(2);\n\n      const _r5 = i0.ɵɵreference(8);\n\n      return i0.ɵɵresetView(ctx_r20.open(_r5, item_r19));\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", item_r19.imageUrl, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ProductComponent_div_5_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"pagination-controls\", 29);\n    i0.ɵɵlistener(\"pageChange\", function ProductComponent_div_5_div_4_Template_pagination_controls_pageChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.p = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\n\nconst _c0 = function (a1) {\n  return {\n    itemsPerPage: 4,\n    currentPage: a1\n  };\n};\n\nfunction ProductComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"ul\", 25);\n    i0.ɵɵtemplate(2, ProductComponent_div_5_li_2_Template, 2, 1, \"li\", 26);\n    i0.ɵɵpipe(3, \"paginate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, ProductComponent_div_5_div_4_Template, 2, 0, \"div\", 1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(3, 2, ctx_r3.Items, i0.ɵɵpureFunction1(5, _c0, ctx_r3.p)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.hasPages);\n  }\n}\n\nfunction ProductComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 30);\n  }\n}\n\nfunction ProductComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"h4\", 32);\n    i0.ɵɵtext(2, \"Purchase Items\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function ProductComponent_ng_template_7_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.close(\"Cross click\"));\n    });\n    i0.ɵɵelementStart(4, \"span\", 34);\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 35)(7, \"div\", 36);\n    i0.ɵɵelement(8, \"img\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 38);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 38);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 36);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 39)(16, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductComponent_ng_template_7_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.addToCart());\n    });\n    i0.ɵɵtext(17, \"+\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductComponent_ng_template_7_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.subtractFromCart());\n    });\n    i0.ɵɵtext(19, \"-\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"div\", 40)(21, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function ProductComponent_ng_template_7_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.close(\"Save click\"));\n    });\n    i0.ɵɵtext(22, \"Ok\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r6.selectedItem.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.selectedItem.itemName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$\", ctx_r6.selectedItem.cost, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.selectedItem.description);\n  }\n}\n\nexport let ProductComponent = /*#__PURE__*/(() => {\n  class ProductComponent {\n    constructor(authorizeService, modalService, cartService) {\n      this.authorizeService = authorizeService;\n      this.modalService = modalService;\n      this.cartService = cartService;\n      this.p = 1;\n      this.itemName = '';\n      this.isAdmin = false;\n      this.cost = 0.0;\n      this.imageUrl = '';\n      this.description = '';\n      this.quantity = 0;\n      this.Items = [];\n      this.hasItems = false;\n      this.hasPages = false;\n      this.adminView = false;\n      this.shopperView = false;\n      this.selectedItem = {\n        imageUrl: '',\n        itemName: '',\n        cost: 0,\n        description: '',\n        active: false,\n        quantity: 0\n      };\n      this.closeResult = '';\n      this.getNameOfUser = this.authorizeService.getUser().pipe(first());\n      this.getNameOfUser.subscribe(noT => {\n        if (typeof noT == \"string\") this.nameOfUser = noT;else if (noT == null || noT == undefined) this.nameOfUser = \"Need to set this value\";else this.nameOfUser = noT.name;\n      });\n\n      if (this.nameOfUser == 'alecto_perfecto@outlook.com') {\n        this.isAdmin = true;\n        this.adminView = true;\n        this.shopperView = false;\n      } else {\n        this.isAdmin = false;\n        this.shopperView = true;\n        this.adminView = false;\n      }\n    }\n\n    close(message) {\n      this.modalService.dismissAll();\n    }\n\n    onClick(content, Item) {\n      this.selectedItem = Item;\n      open(content);\n    }\n\n    addToCart() {\n      this.cartService.addProduct(this.selectedItem);\n      var num = this.cartService.cartItems.indexOf(this.selectedItem);\n      this.checkCartItems();\n    }\n\n    checkCartItems() {\n      if (this.cartService.cartItems.length >= 1) {\n        this.hasItems = true;\n        this.checkProductPages();\n      } else this.hasItems = false;\n    }\n\n    shopperScene() {\n      this.shopperView = true;\n      this.adminView = false;\n    }\n\n    adminScene() {\n      this.adminView = true;\n      this.shopperView = false;\n    }\n\n    checkProductPages() {\n      if (this.cartService.cartItems.length >= 5) this.hasPages = true;else this.hasPages = false;\n    }\n\n    subtractFromCart() {\n      this.cartService.subtractProduct(this.selectedItem);\n      this.checkCartItems();\n    }\n\n    open(content, Item) {\n      this.selectedItem = Item;\n      this.modalService.open(content, {\n        ariaLabelledBy: 'modal-basic-title'\n      }).result.then(result => {\n        this.closeResult = `Closed with: ${result}`;\n      }, reason => {\n        this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\n      });\n    }\n\n    src(content) {\n      return content.selectedItem.imageUrl;\n    } //https://www.tutsmake.com/angular-13-bootstrap-modal-popup-example/\n\n\n    onAddItem() {\n      var iu = this.imageUrl;\n      var ct = this.cost;\n      var desc = this.description;\n      var n = this.itemName;\n      var q = this.quantity;\n      var myItem = {\n        imageUrl: iu,\n        cost: Number(ct),\n        itemName: n,\n        description: desc,\n        active: false,\n        quantity: Number(q)\n      };\n      this.Items.push(myItem);\n      this.selectedItem = myItem;\n      this.addToCart();\n    }\n\n    getDismissReason(reason) {\n      if (reason === ModalDismissReasons.ESC) {\n        return 'by pressing ESC';\n      } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n        return 'by clicking on a backdrop';\n      } else {\n        return `with: ${reason}`;\n      }\n    }\n\n    ngOnInit() {}\n\n  }\n\n  ProductComponent.ɵfac = function ProductComponent_Factory(t) {\n    return new (t || ProductComponent)(i0.ɵɵdirectiveInject(i1.AuthorizeService), i0.ɵɵdirectiveInject(i2.NgbModal), i0.ɵɵdirectiveInject(i3.ShoppingcartService));\n  };\n\n  ProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductComponent,\n    selectors: [[\"app-product\"]],\n    decls: 9,\n    vars: 6,\n    consts: [[1, \"center_text\"], [4, \"ngIf\"], [\"class\", \"center_block\", \"src\", \"https://bn1301files.storage.live.com/y4mmHaKNI3x1mW0xmwTMH1BYKBfptubp4LIO2sJMK28ArrWtYRk1NzR9-vFX_q73zS9faA0CGsFpm2KVG0cx1ECTdfaEcpd7IQ0AV6hIiKnv-rjIC2CYRB3j6l2LzjY_cYiRz-2x0mJ9yQAnmhNeVKFwKkhYuV5vyiz2F4_UJ4MRLTu40urdf6bePB2EnC2ICUg?width=551&height=562&cropmode=none\", 4, \"ngIf\"], [3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"product_shopper\", 4, \"ngIf\"], [\"class\", \"blank_space\", 4, \"ngIf\"], [\"content\", \"\"], [3, \"click\"], [\"src\", \"https://bn1301files.storage.live.com/y4mmHaKNI3x1mW0xmwTMH1BYKBfptubp4LIO2sJMK28ArrWtYRk1NzR9-vFX_q73zS9faA0CGsFpm2KVG0cx1ECTdfaEcpd7IQ0AV6hIiKnv-rjIC2CYRB3j6l2LzjY_cYiRz-2x0mJ9yQAnmhNeVKFwKkhYuV5vyiz2F4_UJ4MRLTu40urdf6bePB2EnC2ICUg?width=551&height=562&cropmode=none\", 1, \"center_block\"], [3, \"ngSubmit\"], [1, \"product_admin\"], [1, \"center_text\", \"product_admin_header\"], [1, \"col-md-8\", \"offset-2\", \"form_entry\"], [\"for\", \"name\", 1, \"col-md-4\"], [\"id\", \"name\", \"required\", \"\", \"name\", \"itemName\", 1, \"col-md-8\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\", 1, \"col-md-4\"], [\"id\", \"description\", \"required\", \"\", \"name\", \"description\", 1, \"col-md-8\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"cost\", 1, \"col-md-4\"], [\"id\", \"cost\", \"required\", \"\", \"name\", \"cost\", 1, \"col-md-8\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"ImageUrl\", 1, \"col-md-4\"], [\"id\", \"ImageUrl\", \"required\", \"\", \"name\", \"imageUrl\", 1, \"col-md-8\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"quantity\", 1, \"col-md-4\"], [\"id\", \"quantity\", \"required\", \"\", \"name\", \"quantity\", 1, \"col-md-8\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"button\", \"default\"], [1, \"product_shopper\"], [1, \"horizontal_menu\"], [\"class\", \"col-md\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md\"], [\"ngbPopover\", \"\", 1, \"responsive\", 3, \"src\", \"click\"], [3, \"pageChange\"], [1, \"blank_space\"], [1, \"modal-header\"], [\"id\", \"modal-basic-title\", 1, \"modal-title\", \"center_text\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"click\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\", \"center_text\"], [1, \"col-md-12\"], [\"height\", \"300\", \"width\", \"300\", 3, \"src\"], [1, \"col-md-6\"], [1, \"col-md-6\", \"col-md-offset-3\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-dark\", 3, \"click\"]],\n    template: function ProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h3\", 0);\n        i0.ɵɵtext(1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(2, ProductComponent_h4_2_Template, 5, 0, \"h4\", 1);\n        i0.ɵɵtemplate(3, ProductComponent_img_3_Template, 1, 0, \"img\", 2);\n        i0.ɵɵtemplate(4, ProductComponent_form_4_Template, 26, 5, \"form\", 3);\n        i0.ɵɵtemplate(5, ProductComponent_div_5_Template, 5, 7, \"div\", 4);\n        i0.ɵɵtemplate(6, ProductComponent_div_6_Template, 1, 0, \"div\", 5);\n        i0.ɵɵtemplate(7, ProductComponent_ng_template_7_Template, 23, 4, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" Welcome \", ctx.nameOfUser, \"!!\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.shopperView);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.adminView);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasItems);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.hasItems);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm, i2.NgbPopover, i6.PaginationControlsComponent, i6.PaginatePipe]\n  });\n  return ProductComponent;\n})();\nexport class MyModal {\n  constructor(options) {\n    this.options = options;\n    options.modalItem = {\n      imageUrl: '',\n      itemName: '',\n      cost: 0,\n      description: '',\n      active: false,\n      quantity: 0\n    };\n  }\n\n}\n\nclass CustomModalOptions {\n  constructor() {}\n\n}","map":null,"metadata":{},"sourceType":"module"}